var primitives={};String.prototype.contains=function(a,b){if(!a)return!1;var c=this.toString(),d=a.toString();b&&(c=c.toLowerCase(),d=d.toLowerCase());return-1!==c.indexOf(d)};Array.prototype.clear=function(){this.splice(0,this.length)};var nu={version:0.1};nu.Storage={};nu.Storage.set=function(a,b){var c=JSON.stringify(b);localStorage.setItem(a,c)};nu.Storage.get=function(a){if(a=localStorage.getItem(a)){var b=null;try{b=JSON.parse(a)}catch(c){b=a}return b}return null};nu.Utils={};nu.Utils.isNetworkAvailable=function(){return nu.Utils.isCordova()?navigator.connection.type!==Connection.NONE:navigator.onLine};nu.Utils.isCordova=function(){return window.cordova};nu.Utils.isAndroid=function(){return nu.Utils.isCordova()?"Android"===device.platform:navigator.userAgent.match("Android")};nu.Utils.isIOS=function(){return nu.Utils.isCordova()?"iOS"===device.platform:navigator.userAgent.match(/(iPhone|iPod|iPad)/i)};
nu.Utils.isOldAndroid=function(){return!nu.Utils.isAndroid()?!1:4>nu.Utils.getOSVersion()};nu.Utils.isOldIOS=function(){return!nu.Utils.isIOS()?!1:5>nu.Utils.getOSVersion()};
nu.Utils.getOSVersion=function(){if(nu.Utils.isCordova())return parseFloat(device.version,10);var a=navigator.userAgent;if(nu.Utils.isIOS()){var b=a.indexOf("OS")+2,a=a.slice(b),b=-1===a.indexOf(")")?0:a.indexOf(")"),a=a.substring(0,b),a=a.replace(/_/g,".");return a=parseFloat(a)}return nu.Utils.isAndroid()?(b=a.indexOf("Android")+7,a=a.slice(b),b=-1===a.indexOf(";")?0:a.indexOf(";"),a=a.substring(0,b),a=parseInt(a)):NaN};
nu.Utils.loadLazyLib=function(a){$.ajax({url:"js/lazy/"+a,dataType:"script",async:!1})};if(!JSON||!JSON.stringify||!JSON.parse)JSON={},JSON.stringify=$.toJSON||function(a){nu.Log.e("JSON.stringify could not be loaded : returning empty string !");return a instanceof Array?"[]":a instanceof Object?"{}":""},JSON.parse=$.evalJSON||function(a){nu.Log.e("JSON.parse could not be loaded : returning empty object !");return{}};nu.debug={};nu.debug.LogLevel={ALL:"ALL",INFO:"INFO",ERROR:"ERROR",WARN:"WARN"};nu.debug.LogItem=Object.subClass({init:function(a,b,c){this.message=b;this.date=c;this.level=a},toString:function(){return this.message}});nu.debug.Log={};
nu.debug.Log.log=function(a,b){if(a){var c=a.toString(),d=null,e=new Date;switch(b){case nu.debug.LogLevel.ERROR:d="error";break;case nu.debug.LogLevel.WARN:d="warn";break;default:b=nu.debug.LogLevel.INFO,d="info"}e=new nu.debug.LogItem(b,c,e);if(nu.debug.Log.level===nu.debug.LogLevel.ALL||nu.debug.Log.level.contains(b)){if(nu.debug.Log.consoled)console[d](c);nu.debug.Log.stacked&&(c=nu.debug.Log.stack,c||(c={},c[nu.debug.LogLevel.INFO]=[],c[nu.debug.LogLevel.WARN]=[],c[nu.debug.LogLevel.ERROR]=[],
c[nu.debug.LogLevel.ALL]=[],nu.debug.Log.stack=c),c[b].unshift(e),c[nu.debug.LogLevel.ALL].unshift(e));nu.debug.Log.storaged&&(c=nu.debug.Log.getStoraged(),c[b].unshift(e),c[nu.debug.LogLevel.ALL].unshift(e),nu.debug.Log.setStoraged(c))}}else nu.debug.Log.e("nu.debug.Log called without parameter")};nu.debug.Log.info=function(a){nu.debug.Log.log(a,nu.debug.LogLevel.INFO)};nu.debug.Log.i=nu.debug.Log.info;nu.debug.Log.error=function(a){nu.debug.Log.log(a,nu.debug.LogLevel.ERROR)};nu.debug.Log.e=nu.debug.Log.error;
nu.debug.Log.warn=function(a){nu.debug.Log.log(a,nu.debug.LogLevel.WARN)};nu.debug.Log.w=nu.debug.Log.warn;nu.debug.Log.getStoraged=function(){var a=nu.Storage.get(nu.debug.Log.STORAGE_KEY);a||(a={},a[nu.debug.LogLevel.INFO]=[],a[nu.debug.LogLevel.ERROR]=[],a[nu.debug.LogLevel.WARN]=[],a[nu.debug.LogLevel.ALL]=[],nu.debug.Log.setStoraged(a));return a};nu.debug.Log.setStoraged=function(a){nu.Storage.set(nu.debug.Log.STORAGE_KEY,a)};
nu.debug.Log.listStoraged=function(a){var b=nu.debug.Log.getStoraged()[a];if(b)if(0===b.length)console.log("There is no logs with type"+a);else{a!==nu.debug.LogLevel.ALL&&console.log("List of logs with type "+a+" :");for(var c=0,d=b.length;c<d;c++)console.log("    * "+b[c]);a!==nu.debug.LogLevel.ALL&&console.log("End of logs with type "+a)}else console.log("The type "+a+"is incorrect")};
nu.debug.Log.listStacked=function(a){if(nu.debug.Log.stack){a=a||nu.debug.LogLevel.ALL;var b=nu.debug.Log.stack[a];if(0===b.length)console.log("There is no logs with type"+a);else{a!==nu.debug.LogLevel.ALL&&console.log("List of logs with type "+a+" :");for(var c=0,d=b.length;c<d;c++)console.log(" >> "+b[c]);a!==nu.debug.LogLevel.ALL&&console.log("End of logs with type "+a)}}else console.log("There is no logs in the stack memory")};
nu.debug.Log.clearStoraged=function(a){var b=nu.debug.Log.getStoraged();a===nu.debug.LogLevel.INFO||a===nu.debug.LogLevel.ERROR||a===nu.debug.LogLevel.WARN?b[a]=[]:a===nu.debug.LogLevel.ALL&&(b[nu.debug.LogLevel.INFO]=[],b[nu.debug.LogLevel.WARN]=[],b[nu.debug.LogLevel.ERROR]=[]);nu.debug.Log.setStoraged(b)};
nu.debug.Log.clearStacked=function(a){var b=nu.debug.Log.stack;a===nu.debug.LogLevel.INFO||a===nu.debug.LogLevel.ERROR||a===nu.debug.LogLevel.WARN?b[a]=[]:a===nu.debug.LogLevel.ALL&&(b[nu.debug.LogLevel.ALL]=[],b[nu.debug.LogLevel.INFO]=[],b[nu.debug.LogLevel.WARN]=[],b[nu.debug.LogLevel.ERROR]=[])};nu.debug.Log.STORAGE_KEY="nuborn.log";nu.debug.Log.consoled=!0;nu.debug.Log.storaged=!1;nu.debug.Log.stacked=!0;nu.debug.Log.level=nu.debug.LogLevel.ALL;nu.pages={};
nu.pages.PageEventsManager=Object.subClass({init:function(){this.pageHandlers={};this.previousPageHandler=this.currentPageHandler=null;this.bindPageEvents()},bindPageEvents:function(){$(document).on("pagebeforecreate","[data-role=page]",$.proxy(this,"pageBeforeCreate"));$(document).on("pageinit","[data-role=page]",$.proxy(this,"pageInit"));$(document).on("pagecreate","[data-role=page]",$.proxy(this,"pageCreate"));$(document).on("pagebeforechange","[data-role=page]",$.proxy(this,"pageBeforeChange"));$(document).on("pagechange",
"[data-role=page]",$.proxy(this,"pageChange"));$(document).on("pagebeforeload","[data-role=page]",$.proxy(this,"pageBeforeLoad"));$(document).on("pageload","[data-role=page]",$.proxy(this,"pageLoad"));$(document).on("pagebeforehide","[data-role=page]",$.proxy(this,"pageBeforeHide"));$(document).on("pagebeforeshow","[data-role=page]",$.proxy(this,"pageBeforeShow"));$(document).on("pageremove","[data-role=page]",$.proxy(this,"pageRemove"));$(document).on("pagehide","[data-role=page]",$.proxy(this,"pageHide"));
$(document).on("pageshow","[data-role=page]",$.proxy(this,"pageShow"))},unbindPageEvent:function(){$(document).off("pagebeforecreate");$(document).off("pageinit");$(document).off("pagecreate");$(document).off("pagebeforechange");$(document).off("pagebeforeload");$(document).off("pagebeforehide");$(document).off("pagebeforeshow");$(document).off("pageremove");$(document).off("pagehide");$(document).off("pageshow")},registerPageHandler:function(a){this.pageHandlers[a.settings.id]=a},getPageHandler:function(a){var b=
this.pageHandlers[a];b||console.log("-- Warning : no page handler for page '"+a+"' !");return b},getPageHandlerFromEvent:function(a){return this.getPageHandler(a.currentTarget.id)},pageBeforeCreate:function(a,b){var c=this.getPageHandlerFromEvent(a);c&&(this.previousPageHandler=this.currentPageHandler,this.currentPageHandler=c,c.pageBeforeCreate(a,b))},pageInit:function(a,b){var c=this.getPageHandlerFromEvent(a);c&&c.pageInit(a,b)},pageCreate:function(a,b){var c=this.getPageHandlerFromEvent(a);c&&
c.pageCreate(a,b)},pageHide:function(a,b){var c=this.getPageHandlerFromEvent(a);c&&c.pageHide(a,b)},pageRemove:function(a,b){var c=this.getPageHandlerFromEvent(a);c&&c.pageRemove(a,b)},pageBeforeShow:function(a,b){var c=this.getPageHandlerFromEvent(a);c&&c.pageBeforeShow(a,b)},pageBeforeChange:function(a,b){var c=this.getPageHandlerFromEvent(a);c&&c.pageBeforeChange(a,b)},pageChange:function(a,b){var c=this.getPageHandlerFromEvent(a);c&&c.pageChange(a,b)},pageBeforeLoad:function(a,b){var c=this.getPageHandlerFromEvent(a);
c&&c.pageBeforeLoad(a,b)},pageLoad:function(a,b){var c=this.getPageHandlerFromEvent(a);c&&c.pageLoad(a,b)},pageShow:function(a,b){var c=this.getPageHandlerFromEvent(a);c&&c.pageShow(a,b)},pageBeforeHide:function(a,b){var c=this.getPageHandlerFromEvent(a);c&&c.pageBeforeHide(a,b)}});nu.pages.PageEventsManager.sharedManager=function(){nu.pages.PageEventsManager.SINGLETON_INSTANCE||(nu.pages.PageEventsManager.SINGLETON_INSTANCE=new nu.pages.PageEventsManager);return nu.pages.PageEventsManager.SINGLETON_INSTANCE};nu.pages.PageHandler=Object.subClass({init:function(a){this.settings=$.extend(!0,{},a);this.html={};this.data={};nu.pages.PageEventsManager.sharedManager().registerPageHandler(this)},pageBeforeCreate:function(a,b){this.html.page=$(a.currentTarget)},pageInit:function(a,b){console.log("page init of "+a.currentTarget.id);this.createHtmlElements();this.createDataElements()},pageCreate:function(a,b){console.log("page create of '"+a.currentTarget.id+"'")},pageBeforeHide:function(a,b){console.log("page before hide of '"+
a.currentTarget.id+"'")},pageHide:function(a,b){console.log("page hide of '"+a.currentTarget.id+"'")},pageBeforeShow:function(a,b){console.log("page before show of '"+a.currentTarget.id+"'")},pageShow:function(a,b){console.log("page show of '"+a.currentTarget.id+"'")},pageBeforeChange:function(a,b){console.log("page before change of '"+a.currentTarget.id+"'")},pageChange:function(a,b){console.log("page change of '"+a.currentTarget.id+"'")},pageBeforeLoad:function(a,b){console.log("page before load of '"+
a.currentTarget.id+"'")},pageLoad:function(a,b){console.log("page load of '"+a.currentTarget.id+"'")},pageRemove:function(a,b){console.log("page remove of '"+a.currentTarget.id+"'");this.deleteHtmlElements();this.deleteDataElements()},createHtmlElements:function(){nu.debug.Log.w("This method should be overriden")},createDataElements:function(){nu.debug.Log.w("This method should be overriden")},deleteHtmlElements:function(){if(this.html)for(var a in this.html)delete this.html[a]},deleteDataElements:function(){if(this.data)for(var a in this.data)delete this.data[a]}});nu.widgets={};nu.widgets.SplashScreen=Object.subClass({init:function(a){this.settings=a||{};this.settings.id||(this.settings.id=nu.widgets.SplashScreen.DEFAULT_ID);this.settings.url?this.initWithUrl():this.initWithId()},initWithId:function(){var a=$("<div>");a.prop("id",this.settings.id);a.addClass("fullscreen");this.element=a},initWithUrl:function(){var a=$.ajax({async:!1,url:this.settings.url});a.done(function(a){a=$(a);var c=a.prop("id");""!==c&&(this.settings.id=c);a.addClass("fullscreen");this.element=a});
a.fail(function(){this.initWithId()})},show:function(a){var b=$("#"+this.settings.id);0<b.length&&(this.element=b);b=this.element;b.hide();$("body").append(b);b.fadeIn(a?400:0)},hide:function(a){var b=this.element;b.fadeOut(a?400:0,function(){b.remove()})}});nu.widgets.SplashScreen.DEFAULT_ID="splashscreen";
