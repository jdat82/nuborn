( function ( ) {
    var g = document.createElement( "dummy" );
    var c = {
        WebkitTransition: "webkitTransitionEnd",
        MozTransition: "transitionend",
        OTransition: "oTransitionEnd",
        msTransition: "MSTransitionEnd",
        transition: "transitionend"
    };
    var h = null;
    var k = null;
    for ( var b in c ) {
        if ( g.style[ b ] !== undefined ) {
            h = b;
            k = c[ b ]
        }
    }
    if ( !h ) {
        return
    }
    var a = "raf";
    var j = null;
    var i = null;
    ( function ( ) {
        var p = 0;
        var q = [ "ms", "moz", "webkit", "o" ];
        for ( var o = 0; o < q.length && !j; ++o ) {
            j = window[ q[ o ] + "RequestAnimationFrame" ];
            i = window[ q[ o ] + "CancelAnimationFrame" ] || window[ q[ o ] + "CancelRequestAnimationFrame" ]
        }
        if ( !j ) {
            j = function ( v, s ) {
                a = "js";
                var r = new Date( ).getTime( );
                var t = Math.max( 0, 16 - ( r - p ) );
                var u = window.setTimeout( function ( ) {
                    v( r + t )
                }, t );
                p = r + t;
                return u
            }
        }
        if ( !i ) {
            i = function ( r ) {
                clearTimeout( r )
            }
        }
    }( ) );
    var f = null;
    var l = null;
    var d = null;
    var n = null;
    var m = window.FPSMeter = {
        run: function ( p ) {
            m.rate = p ? p : 1;
            if ( document.readyState === "complete" ) {
                var q = function ( ) {
                    l = new Array( );
                    d = new Date( ).getTime( );
                    if ( f.style.left == "0px" ) {
                        f.style.left = m.bodyWidth + "px"
                    }
                    else {
                        f.style.left = "0px"
                    } if ( window.mozPaintCount != undefined ) {
                        a = "native";
                        n = window.mozPaintCount
                    }
                    else {
                        var r = function ( ) {
                            n = j( r );
                            var s = e( f, "left" );
                            if ( s ) {
                                l.push( s )
                            }
                        };
                        r( )
                    }
                };
                if ( !f ) {
                    m.bodyWidth = e( document.body, "width" );
                    f = document.createElement( "div" );
                    f.setAttribute( "id", "AnimBenchRef" );
                    f.style.position = "absolute";
                    f.style.backgroundColor = "transparent";
                    f.style.width = "1px";
                    f.style.height = "1px";
                    f.style.left = "0px";
                    f.style.bottom = "0px";
                    f.style[ h ] = "all " + m.rate + "s linear";
                    var o = document.getElementsByTagName( "body" ).item( 0 );
                    o.appendChild( f );
                    f.addEventListener( k, function ( t ) {
                        var x = 0;
                        var s = ( new Date( ).getTime( ) ) - d;
                        if ( window.mozPaintCount != undefined ) {
                            x = window.mozPaintCount - n
                        }
                        else {
                            i( n );
                            var y = 0;
                            var w = -1;
                            for ( var u = 0; u < l.length; u++ ) {
                                var r = l[ u ];
                                if ( r == w ) {
                                    y++
                                }
                                else {
                                    w = r
                                }
                            }
                            x = l.length - y
                        }
                        var v = Math.round( x * 1000 / s );
                        q( );
                        var t = document.createEvent( "Event" );
                        t.initEvent( "fps", true, true );
                        t.fps = v;
                        t.method = a;
                        document.dispatchEvent( t )
                    }, false )
                }
                setTimeout( function ( r ) {
                    q( )
                }, 10 )
            }
            else {
                setTimeout( function ( r ) {
                    m.run( p )
                }, 10 )
            }
        },
        stop: function ( ) {
            i( n );
            n = null;
            var o = document.getElementsByTagName( "body" ).item( 0 );
            o.removeChild( f );
            f = null
        }
    };

    function e( q, o ) {
        var t = null;
        if ( window.getComputedStyle ) {
            var p = window.getComputedStyle( q, null );
            try {
                var r = p.getPropertyCSSValue( o );
                var u = r.primitiveType;
                switch ( u ) {
                case CSSPrimitiveValue.CSS_NUMBER:
                    t = r.getFloatValue( CSSPrimitiveValue.CSS_NUMBER );
                    break;
                case CSSPrimitiveValue.CSS_PERCENTAGE:
                    t = r.getFloatValue( CSSPrimitiveValue.CSS_PERCENTAGE );
                    alert( "The value of the width property: " + t + "%" );
                    break;
                default:
                    if ( CSSPrimitiveValue.CSS_EMS <= u && u <= CSSPrimitiveValue.CSS_DIMENSION ) {
                        t = r.getFloatValue( CSSPrimitiveValue.CSS_PX )
                    }
                }
            }
            catch ( s ) {
                stringValue = p[ o ];
                t = stringValue.substring( 0, stringValue.length - 2 )
            }
        }
        return t
    }
} )( );