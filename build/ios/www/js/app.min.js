var app = {};
window.onerror = function(a, c, d) {
  log.e(a)
};
var utils = nu.Utils, log = nu.debug.Log, PH = nu.pages.PageHandler;
app.version = "0.1.0";
app.name = "Nuborn Application";
app.ready = function() {
  utils.isCordova() ? (log.i("Used as a Hybrid App"), $.mobile.defaultHomeScroll = 0, document.addEventListener("deviceready", app.init, !1)) : (log.i("Used as a Web App"), app.init())
};
app.init = function() {
  if(!utils.isCordova() || !utils.isIOS()) {
    app.splash = new nu.widgets.SplashScreen({id:"splash"}), app.splash.show()
  }
  utils.isOldAndroid() ? $.mobile.defaultPageTransition = "none" : $.mobile.defaultPageTransition = "slide";
  HomePageHandler.insertHTML().done(function() {
    $.mobile.initializePage()
  })
};
$(app.ready);
this.Templates = this.Templates || {};
this.Templates.home_card = new Hogan.Template(function(a, c, d) {
  this.b(d = d || "");
  this.s(this.f("cards", a, c, 1), a, c, 0, 10, 145, "{{ }}") && (this.rs(a, c, function(a, c, b) {
    b.b("<div>");
    b.b("\n" + d);
    b.b('<div class="card" style="background-image:url(\'');
    b.b(b.v(b.f("image", a, c, 0)));
    b.b("')\">");
    b.b("\n" + d);
    b.b('<div class="title">');
    b.b("\n" + d);
    b.b("");
    b.b(b.v(b.f("title", a, c, 0)));
    b.b("\n" + d);
    b.b("</div>");
    b.b("\n" + d);
    b.b("</div>");
    b.b("\n" + d);
    b.b("</div>");
    b.b("\n")
  }), a.pop());
  return this.fl()
});
this.Templates.home_menu_cell = new Hogan.Template(function(a, c, d) {
  this.b(d = d || "");
  this.b("<ul>");
  this.b("\n" + d);
  this.s(this.f("items", a, c, 1), a, c, 0, 16, 63, "{{ }}") && (this.rs(a, c, function(a, c, b) {
    b.b('<li class="');
    b.b(b.v(b.f("icon", a, c, 0)));
    b.b('">');
    b.b("\n" + d);
    b.b("");
    b.b(b.v(b.f("title", a, c, 0)));
    b.b("\n" + d);
    b.b("</li>");
    b.b("\n")
  }), a.pop());
  this.b("</ul>");
  return this.fl()
});
this.Templates.home_news_cell = new Hogan.Template(function(a, c, d) {
  this.b(d = d || "");
  this.b("<ul>");
  this.b("\n" + d);
  this.s(this.f("items", a, c, 1), a, c, 0, 16, 199, "{{ }}") && (this.rs(a, c, function(a, c, b) {
    b.b("<li>");
    b.b("\n" + d);
    b.b('<div class="thumbnail" style="background-image:url(\'');
    b.b(b.v(b.f("image", a, c, 0)));
    b.b("')\"></div>");
    b.b("\n" + d);
    b.b('<div class="title">');
    b.b(b.v(b.f("title", a, c, 0)));
    b.b("</div>");
    b.b("\n" + d);
    b.b('<div class="subtitle">');
    b.b(b.v(b.f("date", a, c, 0)));
    b.b(" - ");
    b.b(b.v(b.f("author", a, c, 0)));
    b.b("</div>");
    b.b("\n" + d);
    b.b("</li>");
    b.b("\n")
  }), a.pop());
  this.b("</ul>");
  return this.fl()
});
var PageHandler = PH.subClass({});
var DetailPageHandler = PH.subClass({init:function() {
  this._super({id:"detail", url:"detail.html"})
}, pageBeforeShow:function(a, c) {
  this.prepareBackButton()
}, prepareBackButton:function() {
  var a = $("#detail .back-button");
  a.on("vmousedown", function() {
    a.addClass("pressed");
    a.one("vmouseup vmousemove", function() {
      a.removeClass("pressed")
    })
  });
  a.on("tap", function() {
    $.mobile.changePage("home.html", {reverse:!0});
    return!1
  })
}});
app.detail = new DetailPageHandler;
var HomePageHandler = PH.subClass({init:function() {
  this._super({id:"home", url:"home.html"})
}, createHtmlElements:function() {
  var a = this.html.page;
  this.html.menuButton = a.find("div.menu-button");
  this.html.menu = a.find("#home-menu");
  this.html.carousel = $("#carousel");
  this.html.carouselWrapper = $("#carousel-wrapper");
  this.html.news = $("#news")
}, createDataElements:function() {
  this.data = {};
  this.data.carousel = {cards:[{title:"The Big Bang Theory", image:"http://www.miglo.net/download/men-beard-the-big-bang-theory-1280x800.jpg"}, {title:"Friends", image:"http://2.bp.blogspot.com/-qsfnOy3X1o8/UIWNBoHZlSI/AAAAAAAAA6E/lpOoOTh0rJU/s1600/Friends_04.jpg"}, {title:"How I Met Your Mother", image:"http://popgoestheweek.com/wp-content/uploads/2012/12/how-i-met-your-mother-506192f593493.jpg"}, {title:"One Piece", image:"http://anime-vostfr.com/wp-content/uploads/2013/01/one-piece-581-vostfr.jpg?8b6f22"}]};
  this.data.menu = {items:[{title:"Accueil", icon:"home"}, {title:"Profil", icon:"profile"}, {title:"Param\u00e8tres", icon:"settings"}, {title:"Aide", icon:"help"}]};
  this.data.news = {items:[{title:'Le cr\u00e9ateur des "Griffin" se pointe... dans "Les Simpson" !', author:"Jim Robs", date:"dimanche 12 mai", image:"http://a69.g.akamai.net/n/69/10688/v1/img5.allocine.fr/acmedia/medias/nmedia/18/97/94/34/20558741.jpg"}, {title:"La cha\u00eene am\u00e9ricaine ABC commande 12 nouvelles s\u00e9ries", author:"Jim Robs", date:"samedi 11 mai", image:"http://a69.g.akamai.net/n/69/10688/v1/img5.allocine.fr/acmedia/medias/nmedia/18/97/97/28/20560689.jpg"}, {title:'La s\u00e9rie adapt\u00e9e de "SHIELD" de Marvel est command\u00e9e', 
  author:"Jim Robs", date:"samedi 11 mai", image:"http://a69.g.akamai.net/n/69/10688/v1/img5.allocine.fr/acmedia/medias/nmedia/18/97/95/80/20559549.jpg"}, {title:'"Nashville" est renouvel\u00e9e', author:"Jim Robs", date:"samedi 11 mai", image:"http://a69.g.akamai.net/n/69/10688/v1/img5.allocine.fr/acmedia/medias/nmedia/18/97/97/77/20560903.jpg"}, {title:'Matthew Perry est maudit : "Go On" est annul\u00e9e !', author:"Jim Robs", date:"vendredi 10 mai", image:"http://a69.g.akamai.net/n/69/10688/v1/img5.allocine.fr/acmedia/medias/nmedia/18/97/97/54/20560816.jpg"}, 
  {title:'Ewan McGregor-Natalie Portman, de "Star wars" \u00e0 "Jane got a gun"', author:"Jim Robs", date:"mardi 7 mai", image:"http://a69.g.akamai.net/n/69/10688/v1/img5.allocine.fr/acmedia/medias/nmedia/18/97/88/93/20556957.jpg"}, {title:'Le final de "Mentalist" !', author:"Jim Robs", date:"lundi 6 mai", image:"http://a69.g.akamai.net/n/69/10688/v1/img5.allocine.fr/acmedia/medias/nmedia/18/97/86/24/20555126.jpg"}, {title:'"Nashville" est renouvel\u00e9e', author:"Jim Robs", date:"samedi 11 mai", 
  image:"http://a69.g.akamai.net/n/69/10688/v1/img5.allocine.fr/acmedia/medias/nmedia/18/97/97/77/20560903.jpg"}, {title:'Matthew Perry est maudit : "Go On" est annul\u00e9e !', author:"Jim Robs", date:"vendredi 10 mai", image:"http://a69.g.akamai.net/n/69/10688/v1/img5.allocine.fr/acmedia/medias/nmedia/18/97/97/54/20560816.jpg"}, {title:'Ewan McGregor-Natalie Portman, de "Star wars" \u00e0 "Jane got a gun"', author:"Jim Robs", date:"mardi 7 mai", image:"http://a69.g.akamai.net/n/69/10688/v1/img5.allocine.fr/acmedia/medias/nmedia/18/97/88/93/20556957.jpg"}, 
  {title:'Le final de "Mentalist" !', author:"Jim Robs", date:"lundi 6 mai", image:"http://a69.g.akamai.net/n/69/10688/v1/img5.allocine.fr/acmedia/medias/nmedia/18/97/86/24/20555126.jpg"}, {title:'"Nashville" est renouvel\u00e9e', author:"Jim Robs", date:"samedi 11 mai", image:"http://a69.g.akamai.net/n/69/10688/v1/img5.allocine.fr/acmedia/medias/nmedia/18/97/97/77/20560903.jpg"}, {title:'Matthew Perry est maudit : "Go On" est annul\u00e9e !', author:"Jim Robs", date:"vendredi 10 mai", image:"http://a69.g.akamai.net/n/69/10688/v1/img5.allocine.fr/acmedia/medias/nmedia/18/97/97/54/20560816.jpg"}, 
  {title:'Ewan McGregor-Natalie Portman, de "Star wars" \u00e0 "Jane got a gun"', author:"Jim Robs", date:"mardi 7 mai", image:"http://a69.g.akamai.net/n/69/10688/v1/img5.allocine.fr/acmedia/medias/nmedia/18/97/88/93/20556957.jpg"}, {title:'Le final de "Mentalist" !', author:"Jim Robs", date:"lundi 6 mai", image:"http://a69.g.akamai.net/n/69/10688/v1/img5.allocine.fr/acmedia/medias/nmedia/18/97/86/24/20555126.jpg"}, {title:'"Nashville" est renouvel\u00e9e', author:"Jim Robs", date:"samedi 11 mai", 
  image:"http://a69.g.akamai.net/n/69/10688/v1/img5.allocine.fr/acmedia/medias/nmedia/18/97/97/77/20560903.jpg"}, {title:'Matthew Perry est maudit : "Go On" est annul\u00e9e !', author:"Jim Robs", date:"vendredi 10 mai", image:"http://a69.g.akamai.net/n/69/10688/v1/img5.allocine.fr/acmedia/medias/nmedia/18/97/97/54/20560816.jpg"}, {title:'Ewan McGregor-Natalie Portman, de "Star wars" \u00e0 "Jane got a gun"', author:"Jim Robs", date:"mardi 7 mai", image:"http://a69.g.akamai.net/n/69/10688/v1/img5.allocine.fr/acmedia/medias/nmedia/18/97/88/93/20556957.jpg"}, 
  {title:'Le final de "Mentalist" !', author:"Jim Robs", date:"lundi 6 mai", image:"http://a69.g.akamai.net/n/69/10688/v1/img5.allocine.fr/acmedia/medias/nmedia/18/97/86/24/20555126.jpg"}, {title:'"Nashville" est renouvel\u00e9e', author:"Jim Robs", date:"samedi 11 mai", image:"http://a69.g.akamai.net/n/69/10688/v1/img5.allocine.fr/acmedia/medias/nmedia/18/97/97/77/20560903.jpg"}, {title:'Matthew Perry est maudit : "Go On" est annul\u00e9e !', author:"Jim Robs", date:"vendredi 10 mai", image:"http://a69.g.akamai.net/n/69/10688/v1/img5.allocine.fr/acmedia/medias/nmedia/18/97/97/54/20560816.jpg"}, 
  {title:'Ewan McGregor-Natalie Portman, de "Star wars" \u00e0 "Jane got a gun"', author:"Jim Robs", date:"mardi 7 mai", image:"http://a69.g.akamai.net/n/69/10688/v1/img5.allocine.fr/acmedia/medias/nmedia/18/97/88/93/20556957.jpg"}, {title:'Le final de "Mentalist" !', author:"Jim Robs", date:"lundi 6 mai", image:"http://a69.g.akamai.net/n/69/10688/v1/img5.allocine.fr/acmedia/medias/nmedia/18/97/86/24/20555126.jpg"}, {title:'"Nashville" est renouvel\u00e9e', author:"Jim Robs", date:"samedi 11 mai", 
  image:"http://a69.g.akamai.net/n/69/10688/v1/img5.allocine.fr/acmedia/medias/nmedia/18/97/97/77/20560903.jpg"}, {title:'Matthew Perry est maudit : "Go On" est annul\u00e9e !', author:"Jim Robs", date:"vendredi 10 mai", image:"http://a69.g.akamai.net/n/69/10688/v1/img5.allocine.fr/acmedia/medias/nmedia/18/97/97/54/20560816.jpg"}, {title:'Ewan McGregor-Natalie Portman, de "Star wars" \u00e0 "Jane got a gun"', author:"Jim Robs", date:"mardi 7 mai", image:"http://a69.g.akamai.net/n/69/10688/v1/img5.allocine.fr/acmedia/medias/nmedia/18/97/88/93/20556957.jpg"}, 
  {title:'Le final de "Mentalist" !', author:"Jim Robs", date:"lundi 6 mai", image:"http://a69.g.akamai.net/n/69/10688/v1/img5.allocine.fr/acmedia/medias/nmedia/18/97/86/24/20555126.jpg"}, {title:'"Nashville" est renouvel\u00e9e', author:"Jim Robs", date:"samedi 11 mai", image:"http://a69.g.akamai.net/n/69/10688/v1/img5.allocine.fr/acmedia/medias/nmedia/18/97/97/77/20560903.jpg"}, {title:'Matthew Perry est maudit : "Go On" est annul\u00e9e !', author:"Jim Robs", date:"vendredi 10 mai", image:"http://a69.g.akamai.net/n/69/10688/v1/img5.allocine.fr/acmedia/medias/nmedia/18/97/97/54/20560816.jpg"}, 
  {title:'Ewan McGregor-Natalie Portman, de "Star wars" \u00e0 "Jane got a gun"', author:"Jim Robs", date:"mardi 7 mai", image:"http://a69.g.akamai.net/n/69/10688/v1/img5.allocine.fr/acmedia/medias/nmedia/18/97/88/93/20556957.jpg"}, {title:'Le final de "Mentalist" !', author:"Jim Robs", date:"lundi 6 mai", image:"http://a69.g.akamai.net/n/69/10688/v1/img5.allocine.fr/acmedia/medias/nmedia/18/97/86/24/20555126.jpg"}]}
}, pageBeforeShow:function(a, c) {
  this.prepareMenu();
  this.handleMenuButton();
  this.prepareCarousel();
  this.prepareNews()
}, pageShow:function(a, c) {
  this.html.carousel.Swipe();
  app.splash ? setTimeout(function() {
    app.splash.hide(!0)
  }, 2E3) : utils.isCordova() && utils.isIOS() && navigator.splashscreen.hide()
}, pageHide:function() {
  if(Object.keys(this.html).length || Object.keys(this.data).length) {
    log.i("Manually remove the Home Page."), this.deleteHtmlElements(), this.deleteDataElements(), $("#" + this.settings.id).remove()
  }
}, prepareMenu:function() {
  var a = this.html.menu;
  a.append(Templates.home_menu_cell.render(this.data.menu));
  a.on("vmousedown", "li", function(a) {
    var d = $(this);
    d.addClass("pressed");
    d.one("vmouseup vmousemove", function(a) {
      d.removeClass("pressed")
    })
  });
  a.on("tap", "li", function(c) {
    $(this).removeClass("pressed");
    log.i("This feature has note been implented yet");
    a.panel("close")
  })
}, handleMenuButton:function() {
  var a = this.html.menuButton;
  a.on("vmousedown", function() {
    a.addClass("pressed");
    a.one("vmouseup vmousemove", function() {
      a.removeClass("pressed")
    })
  });
  var c = this.html.menu;
  a.on("tap", function() {
    c.panel("open");
    return!1
  });
  c.on("panelbeforeopen", function(a, c) {
    utils.disableScroll()
  });
  c.on("panelbeforeclose", function(a, c) {
    utils.enableScroll()
  })
}, prepareCarousel:function() {
  this.html.carouselWrapper.html(Templates.home_card.render(this.data.carousel))
}, prepareNews:function() {
  var a = this.html.news;
  a.append(Templates.home_news_cell.render(this.data.news));
  a.on("vmousedown", "li", function() {
    var a = $(this);
    a.addClass("pressed");
    a.one("vmouseup vmousemove", function() {
      a.removeClass("pressed")
    })
  });
  a.on("tap", "li", function() {
    $.mobile.changePage("detail.html")
  })
}});
app.home = new HomePageHandler;
HomePageHandler.insertHTML = function() {
  return $.ajax({url:app.home.settings.url}).done(function(a) {
    $("body").prepend(a)
  }).fail(function() {
    log.e("There was an error while inserting HTML of Home page.")
  }).promise()
};

